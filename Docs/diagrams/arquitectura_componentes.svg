<svg width="1200" height="800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="grad1" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4A90E2;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2E5C8A;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad2" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#50C878;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2E7D4E;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad3" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FF6B6B;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#C92A2A;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad4" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FFD93D;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#F59F00;stop-opacity:1" />
    </linearGradient>
  </defs>
  
  <!-- Title -->
  <text x="600" y="30" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="#2C3E50">
    Arquitectura de Componentes Principales
  </text>
  
  <!-- Frontend Layer -->
  <rect x="50" y="70" width="1100" height="120" rx="10" fill="url(#grad1)" opacity="0.8"/>
  <text x="600" y="100" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="white">
    Frontend - Voice Interface
  </text>
  <rect x="100" y="120" width="200" height="50" rx="5" fill="white" opacity="0.9"/>
  <text x="200" y="145" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#2C3E50">VAD (Voice Activity Detection)</text>
  <rect x="350" y="120" width="200" height="50" rx="5" fill="white" opacity="0.9"/>
  <text x="450" y="145" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#2C3E50">Web Speech API (TTS Fallback)</text>
  <rect x="600" y="120" width="200" height="50" rx="5" fill="white" opacity="0.9"/>
  <text x="700" y="145" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#2C3E50">Modo Desarrollador</text>
  <rect x="850" y="120" width="200" height="50" rx="5" fill="white" opacity="0.9"/>
  <text x="950" y="145" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#2C3E50">Interrupciones</text>
  
  <!-- WebSocket Layer -->
  <rect x="50" y="220" width="1100" height="80" rx="10" fill="url(#grad2)" opacity="0.8"/>
  <text x="600" y="250" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="white">
    WebSocket Bidireccional (FastAPI)
  </text>
  <rect x="200" y="270" width="150" height="20" rx="5" fill="white" opacity="0.9"/>
  <text x="275" y="285" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#2C3E50">STT Streaming</text>
  <rect x="400" y="270" width="150" height="20" rx="5" fill="white" opacity="0.9"/>
  <text x="475" y="285" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#2C3E50">TTS Streaming</text>
  <rect x="600" y="270" width="150" height="20" rx="5" fill="white" opacity="0.9"/>
  <text x="675" y="285" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#2C3E50">Logs Estructurados</text>
  <rect x="800" y="270" width="150" height="20" rx="5" fill="white" opacity="0.9"/>
  <text x="875" y="285" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#2C3E50">Interrupciones</text>
  
  <!-- Orchestrator Layer -->
  <rect x="50" y="330" width="1100" height="180" rx="10" fill="url(#grad3)" opacity="0.8"/>
  <text x="600" y="360" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="white">
    Multi-Agent Orchestrator (LangGraph / ReAct Pattern)
  </text>
  
  <!-- RAG -->
  <rect x="100" y="380" width="180" height="100" rx="5" fill="white" opacity="0.9"/>
  <text x="190" y="400" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#2C3E50">RAG Pipeline</text>
  <text x="190" y="420" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">Embeddings</text>
  <text x="190" y="435" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">Supabase pgvector</text>
  <text x="190" y="450" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">Top-K Retrieval</text>
  <text x="190" y="465" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">Contexto Histórico</text>
  
  <!-- LLM Reasoning -->
  <rect x="320" y="380" width="180" height="100" rx="5" fill="white" opacity="0.9"/>
  <text x="410" y="400" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#2C3E50">LLM Reasoning</text>
  <text x="410" y="420" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">DeepSeek-R1</text>
  <text x="410" y="435" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">Function Calling</text>
  <text x="410" y="450" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">Iteraciones ReAct</text>
  <text x="410" y="465" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">Razonamiento Interno</text>
  
  <!-- Agents -->
  <rect x="540" y="380" width="180" height="100" rx="5" fill="white" opacity="0.9"/>
  <text x="630" y="400" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#2C3E50">Agentes Especializados</text>
  <text x="630" y="420" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">Calendar (CAL)</text>
  <text x="630" y="435" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">Email (EMAIL)</text>
  <text x="630" y="450" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">Scheduling (SCHED)</text>
  <text x="630" y="465" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">WhatsApp (WA)</text>
  
  <!-- Humanization -->
  <rect x="760" y="380" width="180" height="100" rx="5" fill="white" opacity="0.9"/>
  <text x="850" y="400" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#2C3E50">Humanización</text>
  <text x="850" y="420" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">Limpieza Razonamiento</text>
  <text x="850" y="435" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">Extracción Nombres</text>
  <text x="850" y="450" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">Formato Natural</text>
  <text x="850" y="465" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">Tool Results</text>
  
  <!-- Tool Registry -->
  <rect x="980" y="380" width="120" height="100" rx="5" fill="white" opacity="0.9"/>
  <text x="1040" y="400" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#2C3E50">Tool Registry</text>
  <text x="1040" y="425" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">Centralizado</text>
  <text x="1040" y="445" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">MCP + Local</text>
  <text x="1040" y="465" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">Fallback</text>
  
  <!-- MCP Layer -->
  <rect x="50" y="540" width="1100" height="200" rx="10" fill="url(#grad4)" opacity="0.8"/>
  <text x="600" y="570" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="white">
    MCP (Model Context Protocol) - JSON-RPC 2.0
  </text>
  
  <!-- Transportes -->
  <rect x="100" y="590" width="200" height="130" rx="5" fill="white" opacity="0.9"/>
  <text x="200" y="610" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#2C3E50">Transportes</text>
  <text x="200" y="630" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">• stdio</text>
  <text x="200" y="645" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">• HTTP</text>
  <text x="200" y="660" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">• HTTP+SSE</text>
  <text x="200" y="675" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">• OAuth 2.0</text>
  <text x="200" y="690" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">• REST API</text>
  
  <!-- Servidores MCP -->
  <rect x="350" y="590" width="500" height="130" rx="5" fill="white" opacity="0.9"/>
  <text x="600" y="610" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#2C3E50">Servidores MCP</text>
  <text x="400" y="630" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">google-calendar</text>
  <text x="500" y="630" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">imap</text>
  <text x="600" y="630" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">calendly</text>
  <text x="700" y="630" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">whatsapp</text>
  <text x="800" y="630" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">filesystem</text>
  <text x="400" y="650" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">google-drive</text>
  <text x="500" y="650" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">mock</text>
  <text x="600" y="650" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">...</text>
  
  <!-- External Services -->
  <rect x="900" y="590" width="200" height="130" rx="5" fill="white" opacity="0.9"/>
  <text x="1000" y="610" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#2C3E50">Servicios Externos</text>
  <text x="1000" y="630" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">Google Calendar</text>
  <text x="1000" y="645" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">Gmail/IMAP</text>
  <text x="1000" y="660" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">Calendly</text>
  <text x="1000" y="675" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">Twilio WhatsApp</text>
  <text x="1000" y="690" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#555">Supabase</text>
  
  <!-- Arrows -->
  <path d="M 600 190 L 600 220" stroke="#2C3E50" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 600 300 L 600 330" stroke="#2C3E50" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 600 510 L 600 540" stroke="#2C3E50" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Arrow marker -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
      <polygon points="0 0, 10 5, 0 10" fill="#2C3E50" />
    </marker>
  </defs>
  
  <!-- Footer -->
  <text x="600" y="780" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7F8C8D">
    Proyecto Final - Curso Agentes IA 2ª Edición
  </text>
</svg>


